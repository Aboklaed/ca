<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ar">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨Ø§Ø­Ø« Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Ø¨Ø§Ø­Ø« Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨<span>Ø¨Ø±Ù…Ø¬Ø© Ø­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±ÙŠØ§Ù†ÙŠ</span></h1>

    <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
    <div class="tabs">
      <div class="tab" onclick="setCategory('featured')">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù…ÙŠØ²</div>
      <div class="tab" onclick="setCategory('nature')">Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©</div>
      <div class="tab" onclick="setCategory('travel')">Ø§Ù„Ø³ÙŠØ§Ø­Ø©</div>
      <div class="tab" onclick="setCategory('live cameras')">Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
      <div class="tab" onclick="setCategory('news')">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</div>
      <div class="tab" onclick="setCategory('movies')">Ø£ÙÙ„Ø§Ù…</div>
    </div>

    <div class="search-box">
      <input type="text" class="search-bar" id="inputBox" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‚Ø§Ø·Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù„Ù‰ YouTube">
      <button class="search-btn" onclick="search()">ğŸ”</button>
    </div>
    <div id="player-container">
      <div id="player"></div>
    </div>
    <div id="videosResults"></div>
  </div>

  <!-- ØªØ¶Ù…ÙŠÙ† Ù…ÙƒØªØ¨Ø© YouTube Player API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // JavaScript Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†ØªØ§Ø¦Ø¬ YouTube Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… API

    // ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ± Ø¹Ø§Ù„Ù…ÙŠ Ù„Ù„Ù…Ø´ØºÙ„
    var player;
    var currentCategory = '';
    var wakeLock = null;

    // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ÙˆØªØ­Ø¯ÙŠØ« Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
    function setCategory(category) {
      currentCategory = category;
      var tabs = document.querySelectorAll('.tab');
      for (var i = 0; i < tabs.length; i++) {
        tabs[i].classList.remove('active');
      }
      document.querySelector('.tab[onclick="setCategory(\'' + category + '\')"]').classList.add('active');
      search();
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ù…Ø´ØºÙ„ Ø§Ù„Ù…Ø¶Ù…Ù†
    function playVideo(videoId) {
      if (player) {
        player.loadVideoById(videoId);
      } else {
        player = new YT.Player('player', {
          height: '180', // Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø´ØºÙ„ Ù„ÙŠÙƒÙˆÙ† Ø£ØµØºØ±
          width: '320', // Ø§Ù†Ø®ÙØ§Ø¶ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´ØºÙ„ Ù„ÙŠÙƒÙˆÙ† Ø£ØµØºØ±
          videoId: videoId,
          events: {
            'onReady': onPlayerReady
          }
        });
      }
      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      window.scrollTo({ top: 0, behavior: 'smooth' });
      requestWakeLock(); // Ø·Ù„Ø¨ Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¶Ø§Ø¡Ø©
    }

    // Ø¯Ø§Ù„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø´ØºÙ„ Ø¬Ø§Ù‡Ø²Ù‹Ø§
    function onPlayerReady(event) {
      event.target.playVideo();
    }

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù„Ù‰ YouTube
    function search() {
      var input = document.getElementById('inputBox').value.trim();
      if (input === '' && currentCategory === '') {
        alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØµØ·Ù„Ø­ Ø¨Ø­Ø« ØµØ§Ù„Ø­ Ø£Ùˆ Ø§Ø®ØªÙŠØ§Ø± ÙØ¦Ø©.');
        return;
      }

      var apiKey = 'AIzaSyC4W3wiKWQ-BkRQPw13Yo0aoI9kQVr_s5Q'; // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù…ÙØªØ§Ø­ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
      var query = input;

      if (currentCategory) {
        var categoryQueries = {
          'featured': 'nature documentaries',
          'nature': 'nature',
          'travel': 'travel Europe',
          'live cameras': 'Live cameras',
          'news': 'Arabic news',
          'movies': 'Foreign movies'
        };
        query = categoryQueries[currentCategory] + (input ? ' ' + input : '');
      }

      var requestUrl = 'https://www.googleapis.com/youtube/v3/search?part=snippet&q=' + encodeURIComponent(query) + '&maxResults=25&key=' + apiKey;

      var xhr = new XMLHttpRequest();
      xhr.open('GET', requestUrl, true);
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
          var data = JSON.parse(xhr.responseText);
          var videosResults = document.getElementById('videosResults');
          videosResults.innerHTML = '';

          for (var i = 0; i < data.items.length; i++) {
            var item = data.items[i];
            if (item.id.kind === 'youtube#video') {
              var videoId = item.id.videoId;
              var title = item.snippet.title;
              var channelTitle = item.snippet.channelTitle;
              var thumbnailUrl = item.snippet.thumbnails.medium.url;

              var videoItem = document.createElement('div');
              videoItem.classList.add('video-item');

              var thumbnailImg = document.createElement('img');
              thumbnailImg.classList.add('video-thumbnail');
              thumbnailImg.src = thumbnailUrl;
              thumbnailImg.alt = title;
              // Ø¬Ø¹Ù„ Ø§Ù„ØµÙˆØ±Ø© ØªØ¨Ø¯Ø£ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
              thumbnailImg.onclick = (function(videoId) {
                return function() {
                  playVideo(videoId);
                };
              })(videoId);

              // Ø§Ø³ØªØ®Ø¯Ø§Ù… <span> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <a> Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
              var titleElem = document.createElement('span');
              titleElem.classList.add('video-title');
              titleElem.textContent = title;
              titleElem.onclick = (function(videoId) {
                return function() {
                  playVideo(videoId);
                };
              })(videoId);

              var channelElem = document.createElement('p');
              channelElem.classList.add('channel-name');
              channelElem.textContent = channelTitle;

              var downloadBtn = document.createElement('a');
              downloadBtn.classList.add('download-button');
              downloadBtn.textContent = 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ';
              var downloadUrl = 'https://www.ssyoutube.com/watch?v=' + videoId;
              downloadBtn.href = downloadUrl;
              downloadBtn.onclick = (function(downloadUrl) {
                return function(event) {
                  event.preventDefault();
                  navigator.clipboard.writeText(downloadUrl).then(function() {
                    window.location.href = downloadUrl;
                  }, function(err) {
                    console.error('ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·:', err);
                  });
                };
              })(downloadUrl);

              // Ø¬Ø¹Ù„ Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ø£ÙƒÙ…Ù„Ù‡ ÙŠØ¨Ø¯Ø£ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
              videoItem.onclick = (function(videoId) {
                return function() {
                  playVideo(videoId);
                };
              })(videoId);

              videoItem.appendChild(thumbnailImg);
              videoItem.appendChild(titleElem); // Ø§Ø³ØªØ®Ø¯Ø§Ù… <span> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <a>
              videoItem.appendChild(channelElem);
              videoItem.appendChild(downloadBtn);

              videosResults.appendChild(videoItem);
            }
          }
        } else if (xhr.readyState == 4) {
          console.error('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', xhr.statusText);
          alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.');
        }
      };
      xhr.send();
    }

    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« keydown Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
    document.getElementById('inputBox').addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        search();
        event.target.blur(); // Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ø­Ø«
      }
    });

    // Ø¯Ø§Ù„Ø© Ù„Ø·Ù„Ø¨ Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¶Ø§Ø¡Ø©
    function requestWakeLock() {
      if ('wakeLock' in navigator) {
        navigator.wakeLock.request('screen').then(function(lock) {
          wakeLock = lock;
          console.log('Wake Lock is active.');
        }).catch(function(err) {
          console.error('Failed to acquire wake lock:', err);
        });
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¶Ø§Ø¡Ø©
    function releaseWakeLock() {
      if (wakeLock) {
        wakeLock.release().then(function() {
          console.log('Wake Lock released.');
          wakeLock = null;
        });
      }
    }

    // Ø¥Ø·Ù„Ø§Ù‚ Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¶Ø§Ø¡Ø© Ø¹Ù†Ø¯ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    window.addEventListener('beforeunload', releaseWakeLock);
  </script>
</body>
</html>
